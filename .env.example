# =============================================================================
# Shopping POC Environment Variables Template
# =============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control

# =============================================================================
# PostgreSQL Database Configuration (Local Development)
# =============================================================================
# Customer database
PSQL_CUSTOMER_DB=customersdb
PSQL_CUSTOMER_ROLE=customersuser
PSQL_CUSTOMER_PASSWORD=your_customer_password_here
PSQL_CUSTOMER_DB_URL=postgres://$PSQL_CUSTOMER_ROLE:$PSQL_CUSTOMER_PASSWORD@localhost:30432/$PSQL_CUSTOMER_DB?sslmode=disable

# Product database
PSQL_PRODUCT_DB=productsdb
PSQL_PRODUCT_ROLE=productsuser
PSQL_PRODUCT_PASSWORD=your_product_password_here
PSQL_PRODUCT_DB_URL=postgres://$PSQL_PRODUCT_ROLE:$PSQL_PRODUCT_PASSWORD@localhost:30432/$PSQL_PRODUCT_DB?sslmode=disable

# Platform database settings (shared by all services)
DATABASE_MAX_OPEN_CONNS=25
DATABASE_MAX_IDLE_CONNS=25
DATABASE_CONN_MAX_LIFETIME=5m
DATABASE_CONN_MAX_IDLE_TIME=5m
DATABASE_CONNECT_TIMEOUT=30s
DATABASE_QUERY_TIMEOUT=60s
DATABASE_HEALTH_CHECK_INTERVAL=30s
DATABASE_HEALTH_CHECK_TIMEOUT=5s

# =============================================================================
# Kafka Configuration
# =============================================================================
KAFKA_BROKERS=localhost:9092

# Customer service Kafka settings
CUSTOMER_WRITE_TOPIC=CustomerEvents
CUSTOMER_READ_TOPICS=
CUSTOMER_GROUP=CustomerGroup

# EventReader service Kafka settings
EVENT_READER_WRITE_TOPIC=ReaderEvents
EVENT_READER_READ_TOPICS=CustomerEvents
EVENT_READER_GROUP=EventReaderGroup

# =============================================================================
# Outbox Pattern Configuration
# =============================================================================
OUTBOX_BATCH_SIZE=10
OUTBOX_DELETE_BATCH_SIZE=10
OUTBOX_PROCESS_INTERVAL=10s
OUTBOX_MAX_RETRIES=3

CUSTOMER_OUTBOX_PROCESSING_INTERVAL=10s

# =============================================================================
# MinIO Object Storage Configuration
# =============================================================================
# Platform MinIO settings
MINIO_ENDPOINT_KUBERNETES=minio.minio.svc.cluster.local:9000
MINIO_ENDPOINT_LOCAL=localhost:9000
MINIO_ACCESS_KEY=your_minio_access_key
MINIO_SECRET_KEY=your_minio_secret_key
MINIO_TLS_VERIFY=false

# Product service MinIO settings
MINIO_BUCKET=productimages

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# =============================================================================
# WebSocket Configuration
# =============================================================================
WEBSOCKET_URL=ws://localhost:8080/ws
WEBSOCKET_TIMEOUT=30s
WEBSOCKET_READ_BUFFER=1024
WEBSOCKET_WRITE_BUFFER=1024
WEBSOCKET_PORT=:8080
WEBSOCKET_PATH=/ws
WEBSOCKET_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:3000

# =============================================================================
# Service Port Configuration
# =============================================================================
CUSTOMER_SERVICE_PORT=:8080
PRODUCT_SERVICE_PORT=:8080

# =============================================================================
# Product Service Configuration
# =============================================================================
IMAGE_CACHE_DIR=/tmp/product-cache
IMAGE_CACHE_MAX_AGE=24h
IMAGE_CACHE_MAX_SIZE=0
CSV_BATCH_SIZE=100

# =============================================================================
# Platform Service Configuration
# =============================================================================
POSTGRES_DB=postgresdb
POSTGRES_USER=postgresadmin
POSTGRES_PASSWORD=your_postgres_password

KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=your_keycloak_admin_password
KEYCLOAK_DB_USERNAME=keycloak
KEYCLOAK_DB_PASSWORD=your_keycloak_db_password
KEYCLOAK_DB_URL_DATABASE=postgres://keycloak:keycloak@localhost:30432/keycloak?sslmode=disable

MINIO_ROOT_USER=your_minio_root_user
MINIO_ROOT_PASSWORD=your_minio_root_password
